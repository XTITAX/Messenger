<!DOCTYPE html>
<html>
<head>
    <title>–ß–∞—Ç + Dev-–ø–∞–Ω–µ–ª—å</title>
    <meta charset="UTF-8">
    <link rel="icon" href="assets/icon.png" type="image/png">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="/js/chat.js"></script>
    <link rel="stylesheet" href="/css/dev.css">
</head>
<body>
    <h2>üëë Dev-–ø–∞–Ω–µ–ª—å ‚Äî <%= username %></h2>
    <div id="chat"></div>
    <form id="message-form">
        <input type="text" id="message" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" required>
        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
    <button class="localmsg" onclick="localMsg()">–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
    <div class="dev-panel">
        <h3>–ü–∞–Ω–µ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</h3>
        <button onclick="clearChat()">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞</button>
        <button onclick="kickUser()">–ö–∏–∫–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
    </div>
    <!-- –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
    <h2 id="us">–£—á–∞—Å—Ç–Ω–∏–∫–∏</h2>
    <div id="user-list">
        <ul id="users">
            <li></li>
        </ul>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —á–∞—Ç–∞
        function clearChat() {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞?")) {
                socket.emit("clear chat");
                document.getElementById('chat').innerHTML = '';  // –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —á–∞—Ç
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        function localMsg() {
            let targetUser = prompt("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:");
            if (targetUser) {
                let msg = prompt("–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:");
                if (msg) {
                    socket.emit("localmsg", msg, targetUser);
                }
            }
        }
    </script> 
</body>
</html>
